<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Labyrinth Hotel - Secret Crossword</title>
    <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:wght@600;700&family=Noto+Sans+KR:wght@300;500&family=Space+Mono&display=swap" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Sortable/1.15.0/Sortable.min.js"></script>
    <style>
        :root {
            --bg-dark: #050505;
            --gold-main: #c5a059;
            --gold-dim: rgba(197, 160, 89, 0.2);
            --grid-bg: #111111;
            --text-color: #d4d4d4;
        }

        body {
            background-color: var(--bg-dark);
            color: var(--gold-main);
            font-family: 'Noto Sans KR', sans-serif;
            margin: 0;
            padding: 40px 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
            min-height: 100vh;
            user-select: none;
        }

        header {
            text-align: center;
            margin-bottom: 40px;
        }

        h1 {
            font-family: 'Cormorant Garamond', serif;
            font-size: 2.5rem;
            letter-spacing: 12px;
            margin: 0;
            text-transform: uppercase;
            background: linear-gradient(to right, #8e6d3d, #e6cc92, #8e6d3d);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .main-container {
            display: flex;
            gap: 50px;
            width: 100%;
            max-width: 1100px;
            flex-wrap: wrap;
            justify-content: center;
        }

        /* === Crossword Grid === */
        .crossword-section {
            flex: 1;
            min-width: 350px;
            max-width: 500px;
        }

        .grid-container {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 2px;
            background-color: #222;
            border: 2px solid var(--gold-main);
            aspect-ratio: 1 / 1;
            box-shadow: 0 25px 50px rgba(0,0,0,0.9);
        }

        .cell {
            background-color: var(--grid-bg);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.3rem;
            color: var(--text-color);
            cursor: crosshair;
            transition: background-color 0.3s;
            position: relative;
        }

        /* 드래그 중인 미리보기 상태 */
        .cell.preview {
            background-color: var(--gold-dim);
        }

        /* 확정된 하이라이트 상태 (지속됨) */
        .cell.highlighted {
            background-color: var(--gold-main);
            color: var(--bg-dark);
            font-weight: 700;
        }

        /* === Clues List === */
        .clues-section {
            flex: 1.2;
            min-width: 350px;
            display: flex;
            flex-direction: column;
            gap: 30px;
        }

        .clue-group h2 {
            font-family: 'Cormorant Garamond', serif;
            font-size: 1.8rem;
            border-bottom: 1px solid var(--gold-main);
            margin: 0 0 15px 0;
            padding-bottom: 5px;
        }

        .clue-item {
            padding: 12px;
            margin-bottom: 8px;
            background-color: #1a1a1a;
            border-left: 2px solid var(--gold-main);
            font-size: 0.85rem;
            cursor: grab;
            transition: 0.2s;
        }

        .clue-item:hover { background-color: #222; }
        .sortable-ghost { opacity: 0.3; background-color: var(--gold-main); }

        @media (max-width: 850px) {
            .main-container { flex-direction: column; align-items: center; }
        }
    </style>
</head>
<body>

    <header>
        <h1>Pantry</h1>
    </header>

    <div class="main-container">
        <div class="crossword-section">
            <div class="grid-container" id="grid"></div>
        </div>

        <div class="clues-section">
            <div class="clue-group">
                <h2>Across</h2>
                <ul id="across-list" class="sortable-list">
                    <li class="clue-item">1<font color="#EAEAB2"
>O</font>73년 독일, 오스트리아, 제정 러시아 황제 삼국 협정</li>
                    <li class="clue-item">남<font color="#EAEAB2"
>O</font> 지방에서 부르는 진양조장단의 잡가</li>
                    <li class="clue-item">옻<font color="#EAEAB2"
>O</font>과에 속한 옻나무의 생약명</li>
                    <li class="clue-item">좁<font color="#EAEAB2"
>O</font> 그릇에서 찌개 따위가 요란스럽게 끓다</li>
                    <li class="clue-item">조<font color="#EAEAB2"
>O</font> 시대 이두 문서 한자 어구 표기 책</li>
                    <li class="clue-item">아<font color="#EAEAB2"
>O</font>아 동쪽 끝에 있는 입헌 군주국</li>
                    <li class="clue-item">맡<font color="#EAEAB2"
>O</font>보던 일자리를 그만두고 물러남</li>
                </ul>
            </div>
            <div class="clue-group">
                <h2>Down</h2>
                <ul id="down-list" class="sortable-list">
                    <li class="clue-item">멕시코의 매운 고추 요리</li>
                    <li class="clue-item">머리에 다섯 쌍의 다리가 있는 연체동물</li>
                    <li class="clue-item">모래 같은 식감의 과일이라는 뜻의 이름</li>
                    <li class="clue-item">소 살코기를 가늘게 썰어 날로 먹는 음식</li>
                    <li class="clue-item">주식과 부식을 한 그릇에 담은 간편식</li>
                    <li class="clue-item">운동 시 마시기 적합하게 만든 기능성 음료</li>
                    <li class="clue-item">얼룩무늬가 있는 고등어과 바닷물고기</li>
                </ul>
            </div>
        </div>
    </div>

    <script>
        const gridData = [
            ["이", "문", "대", "사", "의", "일", "본"],
            ["온", "숫", "자", "과", "를", "품", "제"],
            ["음", "삼", "제", "동", "맹", "요", "외"],
            ["료", "치", "오", "글", "거", "리", "다"],
            ["하", "고", "징", "육", "자", "배", "기"],
            ["글", "자", "어", "회", "칠", "수", "피"],
            ["수", "들", "세", "어", "리", "보", "라"]
        ];

        const gridContainer = document.getElementById('grid');
        let isDragging = false;
        let startPos = null;
        let currentPath = [];

        // 그리드 생성
        gridData.flat().forEach((char, i) => {
            const cell = document.createElement('div');
            cell.className = 'cell';
            cell.textContent = char;
            cell.dataset.r = Math.floor(i / 7);
            cell.dataset.c = i % 7;

            cell.onmousedown = () => {
                isDragging = true;
                startPos = { r: +cell.dataset.r, c: +cell.dataset.c };
                updatePath(startPos);
            };

            cell.onmouseenter = () => {
                if (isDragging) updatePath({ r: +cell.dataset.r, c: +cell.dataset.c });
            };

            gridContainer.appendChild(cell);
        });

        window.onmouseup = () => {
            if (isDragging) {
                // 드래그 종료 시 해당 경로의 모든 셀 토글
                currentPath.forEach(el => el.classList.toggle('highlighted'));
                clearPreview();
                isDragging = false;
                startPos = null;
            }
        };

        function updatePath(endPos) {
            clearPreview();
            currentPath = [];
            const cells = document.querySelectorAll('.cell');
            
            const rd = Math.abs(endPos.r - startPos.r);
            const cd = Math.abs(endPos.c - startPos.c);

            cells.forEach(cell => {
                const r = +cell.dataset.r;
                const c = +cell.dataset.c;
                let inPath = false;

                if (cd >= rd) { // 가로 방향 우선
                    if (r === startPos.r && c >= Math.min(startPos.c, endPos.c) && c <= Math.max(startPos.c, endPos.c)) inPath = true;
                } else { // 세로 방향 우선
                    if (c === startPos.c && r >= Math.min(startPos.r, endPos.r) && r <= Math.max(startPos.r, endPos.r)) inPath = true;
                }

                if (inPath) {
                    cell.classList.add('preview');
                    currentPath.push(cell);
                }
            });
        }

        function clearPreview() {
            document.querySelectorAll('.cell').forEach(c => c.classList.remove('preview'));
        }

        // 리스트 드래그 앤 드롭
        new Sortable(document.getElementById('across-list'), { animation: 150, ghostClass: 'sortable-ghost' });
        new Sortable(document.getElementById('down-list'), { animation: 150, ghostClass: 'sortable-ghost' });
    </script>
</body>
</html>
