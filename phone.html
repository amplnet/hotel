<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Labyrinth Hotel | Terminal</title>
    
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@500;700&family=Nanum+Myeongjo:wght@700&display=swap" rel="stylesheet">

    <style>
        /* [UI 테마 설정 - 이전과 동일] */
        * { margin: 0; padding: 0; box-sizing: border-box; cursor: none; }
        body { 
            background-color: #050505; 
            display: flex; justify-content: center; align-items: center; 
            min-height: 100vh; font-family: 'Pretendard', sans-serif;
            overflow: hidden;
        }

        .cursor { position: fixed; width: 8px; height: 8px; background: #8B0000; border-radius: 50%; pointer-events: none; z-index: 9999; }
        .cursor-follower { position: fixed; width: 40px; height: 40px; border: 1px solid rgba(139, 0, 0, 0.5); border-radius: 50%; pointer-events: none; transition: transform 0.1s; z-index: 9998; }

        .phone-frame {
            width: 380px; padding: 50px 30px;
            background: linear-gradient(145deg, #151515, #000);
            border: 1px solid #2a1f10; border-radius: 10px;
            box-shadow: 0 0 100px rgba(0,0,0,1);
            text-align: center; z-index: 100;
        }

        .hotel-brand { font-family: 'Nanum Myeongjo', serif; color: #D4AF37; font-size: 1.2rem; letter-spacing: 6px; margin-bottom: 40px; opacity: 0.7; }

        .digital-display { display: flex; justify-content: center; gap: 8px; background: #000; padding: 20px; border-radius: 4px; border: 2px solid #111; margin-bottom: 45px; box-shadow: inset 0 0 15px #000; }
        .segment-box { width: 45px; height: 60px; background: #080808; border: 1px solid #151515; display: flex; justify-content: center; align-items: center; font-family: 'Orbitron', sans-serif; font-size: 2.2rem; color: #300000; transition: all 0.1s; user-select: none; }
        .segment-box.active { color: #FF0000; text-shadow: 0 0 12px #FF0000, 0 0 25px rgba(255, 0, 0, 0.6); }

        .dial-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 15px; padding: 0 10px; }
        .dial-key { height: 60px; background: transparent; border: 1px solid #222; color: #555; font-family: 'Orbitron', sans-serif; font-size: 1.1rem; display: flex; justify-content: center; align-items: center; transition: 0.3s; outline: none; }
        .dial-key:hover { border-color: #D4AF37; color: #D4AF37; }
        .dial-key:active { background: #4a0000; color: #fff; border-color: #8B0000; }
        .dial-key.gold { color: #D4AF37; border-color: #332211; font-weight: bold; }

        #status-info { margin-top: 35px; height: 20px; font-size: 0.85rem; letter-spacing: 2px; color: #333; text-transform: uppercase; }
        .success-text { color: #D4AF37 !important; font-weight: bold; }
        .error-shake { color: #8B0000 !important; animation: shake 0.4s; }

        @keyframes shake { 0%, 100% { transform: translateX(0); } 25% { transform: translateX(-6px); } 75% { transform: translateX(6px); } }
        .vignette { position: fixed; top: 0; left: 0; width: 100%; height: 100%; box-shadow: inset 0 0 250px #000; pointer-events: none; z-index: 50; }
    </style>
</head>
<body oncontextmenu="return false" onselectstart="return false" ondragstart="return false">

    <div class="cursor"></div>
    <div class="cursor-follower"></div>
    <div class="vignette"></div>

    <div class="phone-frame">
        <div class="hotel-brand">RECEPTION</div>

        <div class="digital-display">
            <div class="segment-box" id="s0">0</div>
            <div class="segment-box" id="s1">0</div>
            <div class="segment-box" id="s2">0</div>
            <div class="segment-box" id="s3">0</div>
            <div class="segment-box" id="s4">0</div>
        </div>

        <div class="dial-grid">
            <button class="dial-key" onclick="inputDigit('1')">1</button>
            <button class="dial-key" onclick="inputDigit('2')">2</button>
            <button class="dial-key" onclick="inputDigit('3')">3</button>
            <button class="dial-key" onclick="inputDigit('4')">4</button>
            <button class="dial-key" onclick="inputDigit('5')">5</button>
            <button class="dial-key" onclick="inputDigit('6')">6</button>
            <button class="dial-key" onclick="inputDigit('7')">7</button>
            <button class="dial-key" onclick="inputDigit('8')">8</button>
            <button class="dial-key" onclick="inputDigit('9')">9</button>
            <button class="dial-key" style="font-size: 0.7rem;" onclick="clearPhone()">CLEAR</button>
            <button class="dial-key" onclick="inputDigit('0')">0</button>
            <button class="dial-key gold" onclick="validate()">CALL</button>
        </div>

        <p id="status-info">dialing system active</p>
    </div>

    <script>
        /* [보안 설정] */
        document.onkeydown = function(e) {
            if(e.keyCode == 123 || (e.ctrlKey && (e.keyCode == 85 || (e.shiftKey && (e.keyCode == 73 || e.keyCode == 74 || e.keyCode == 67))))) return false;
        };

        /* [커서 로직] */
        const cr = document.querySelector('.cursor'), fl = document.querySelector('.cursor-follower');
        document.addEventListener('mousemove', e => {
            cr.style.left = e.clientX + 'px'; cr.style.top = e.clientY + 'px';
            setTimeout(() => { fl.style.left = e.clientX - 16 + 'px'; fl.style.top = e.clientY - 16 + 'px'; }, 50);
        });

        /* [핵심 로직] */
        let buffer = "";
        const secret = atob("Mzc4MTg="); // 37818 암호화

        function inputDigit(n) {
            if (buffer.length < 5) {
                const idx = buffer.length;
                buffer += n;
                const box = document.getElementById('s' + idx);
                box.innerText = n;
                box.classList.add('active');
            }
        }

        function clearPhone() {
            buffer = "";
            for(let i=0; i<5; i++) {
                const box = document.getElementById('s' + i);
                box.innerText = "0";
                box.classList.remove('active');
            }
            const st = document.getElementById('status-info');
            st.innerText = "dialing system active";
            st.classList.remove('success-text', 'error-shake');
        }

        function validate() {
            const st = document.getElementById('status-info');
            
            if (buffer === secret) {
                st.innerText = "CONNECTING TO MANAGER...";
                st.classList.add('success-text');

                // 정답 시 1초 뒤 부모 페이지(Main Page) 제어
                setTimeout(() => {
                    try {
                        // 부모 페이지의 주소를 변경하여 함수를 실행시킴
                        window.parent.location.href = "javascript:goNextPage('managerman');";
                    } catch (e) {
                        // 크로스 도메인 이슈가 있을 경우를 대비한 직접 호출 시도
                        if(window.parent.goNextPage) {
                            window.parent.goNextPage('managerman');
                        }
                    }
                }, 1000);

            } else {
                st.innerText = "connection failed";
                st.classList.add('error-shake');
                setTimeout(clearPhone, 1200);
            }
        }
    </script>
</body>
</html>
